# Welcome to Vast.ai’s documentation!

# Indices and tables


* [Index](genindex.md)


* [Module Index](py-modindex.md)


* [Search Page](search.md)

# vast-python

Super basic git repo so interested folks can pull request.
More to follow. There are a few additional files here that may
be of use to developers of the project.


* mypi.ini : config file for the mypy static type checker.


* make-archive.sh :

    Shell script to build the tarball that ships to
    customers. I’ve gotten rid of the venv directory for now.


* watcher.sh

    invoices. It basically just uses the watch command to watch the directory
    using ls. When anything changes it dies. Then the script regenerates
    the PDF. This is all done in a “while true” construct that loops forever.
    You’ll need to hit Ctrl-C *twice* to kill it. The first one only kills
    the watch command within the script.

We’ve got some autogenerated docs now using Sphinx. Basically, it takes
the doctrings from the code and makes documentation in various formats. Currently,
we can generate HTML and Markdown targets. Generally, to build the docs in a given
format you do make [format] so make markdown builds the markdown docs.
To regenerate the Markdown docs you must install
[sphinx-markdown-builder](https://pypi.org/project/sphinx-markdown-builder/)
using pip3 install sphinx-markdown-builder. Currently, the 3 links under “Indices and tables”
are not being generated. We are looking into this.

<!-- Vast.ai documentation master file, created by
sphinx-quickstart on Thu Jan 20 12:32:40 2022.
You can adapt this file completely to your liking, but it should at least
contain the root `toctree` directive. -->
# Modules

## vast


### vast.apiurl(args: [argparse.Namespace](https://docs.python.org/3/library/argparse.html#argparse.Namespace), subpath: [str](https://docs.python.org/3/library/stdtypes.html#str), query_args: [Optional](https://docs.python.org/3/library/typing.html#typing.Optional)[[Dict](https://docs.python.org/3/library/typing.html#typing.Dict)] = None)
Creates the endpoint URL for a given combination of parameters.


* **Parameters**

    
    * **args** ([*argparse.Namespace*](https://docs.python.org/3/library/argparse.html#argparse.Namespace)) – Namespace with many fields relevant to the endpoint.


    * **subpath** ([*str*](https://docs.python.org/3/library/stdtypes.html#str)) – added to end of URL to further specify endpoint.


    * **query_args** ([*Dict*](https://docs.python.org/3/library/typing.html#typing.Dict)) – specifics such as API key and search parameters that complete the URL.



* **Rtype str**



### vast.change__bid(args: [argparse.Namespace](https://docs.python.org/3/library/argparse.html#argparse.Namespace))
Alter the bid with id contained in args.





usage: ('vast change bid id [--price PRICE]',)

        Change the current bid price of instance id to PRICE.
        If PRICE is not specified, then a winning bid price is used as the default.
    
* ('"id", help="id of instance type to change bid", type=int',)
* ('"--price", help="per machine bid price in $/hour", type=float',)
* **Parameters**

    **args** ([*argparse.Namespace*](https://docs.python.org/3/library/argparse.html#argparse.Namespace)) – should supply all the command-line options



* **Rtype int**



### vast.create__instance(args: [argparse.Namespace](https://docs.python.org/3/library/argparse.html#argparse.Namespace))
Performs the same action as pressing the “RENT” button on the website at [https://vast.ai/console/create/](https://vast.ai/console/create/).





usage: ('vast create instance id [OPTIONS] [--args ...]',)
* ('"id", help="id of instance type to launch", type=int',)
* ('"--price", help="per machine bid price in $/hour", type=float',)
* ('"--disk", help="size of local disk partition in GB", type=float, default=10',)
* ('"--image", help="docker container image to launch", type=str',)
* ('"--label", help="label to set on the instance", type=str',)
* ('"--onstart", help="filename to use as onstart script", type=str',)
* ('"--onstart-cmd", help="contents of onstart script as single argument", type=str',)
* ('"--jupyter", help="Launch as a jupyter instance instead of an ssh instance.", action="store_true"',)
* ('"--jupyter-dir",
             help="For runtype \'jupyter\', directory in instance to use to launch jupyter. Defaults to image\'s working directory.",
             type=str',)
* ('"--jupyter-lab", help="For runtype \'jupyter\', Launch instance with jupyter lab.", action="store_true"',)
* ('"--lang-utf8",
             help="Workaround for images with locale problems: install and generate locales before instance launch, and set locale to C.UTF-8.",
             action="store_true"',)
* ('"--python-utf8", help="Workaround for images with locale problems: set python\'s locale to C.UTF-8.",
             action="store_true"',)
* ('"--extra", help=argparse.SUPPRESS',)
* ('"--args", nargs=argparse.REMAINDER,
             help="DEPRECATED: list of arguments passed to container launch. Onstart is recommended for this purpose."',)
* ('"--create-from",
             help="Existing instance id to use as basis for new instance. Instance configuration should usually be identical, as only the difference from the base image is copied.",
             type=str',)
* ('"--force", help="Skip sanity checks when creating from an existing instance", action="store_true"',)
* **Parameters**

    **args** ([*argparse.Namespace*](https://docs.python.org/3/library/argparse.html#argparse.Namespace)) – Namespace with many fields relevant to the endpoint.



### vast.deindent(message: [str](https://docs.python.org/3/library/stdtypes.html#str))
Deindent a quoted string. Scans message and finds the smallest number of whitespace characters in any line and
removes that many from the start of every line.


* **Parameters**

    **message** ([*str*](https://docs.python.org/3/library/stdtypes.html#str)) – Message to deindent.



* **Rtype str**



### vast.destroy__instance(args)
Perfoms the same action as pressing the “DESTROY” button on the website at [https://vast.ai/console/instances/](https://vast.ai/console/instances/).





usage: ('vast destroy instance id [-h] [--api-key API_KEY] [--raw]',)
* ('"id", help="id of instance to delete", type=int',)
* **Parameters**

    **args** ([*argparse.Namespace*](https://docs.python.org/3/library/argparse.html#argparse.Namespace)) – should supply all the command-line options



### vast.display_table(rows: [list](https://docs.python.org/3/library/stdtypes.html#list), fields: [Tuple](https://docs.python.org/3/library/typing.html#typing.Tuple))
Basically takes a set of field names and rows containing the corresponding data and prints a nice tidy table
of it.


* **Parameters**

    
    * **rows** ([*list*](https://docs.python.org/3/library/stdtypes.html#list)) – Each row is a dict with keys corresponding to the field names (first element) in the fields tuple.


    * **fields** (*Tuple*) – 5-tuple describing a field. First element is field name, second is human readable version, third is format string, fourth is a lambda function run on the data in that field, fifth is a bool determining text justification. True = left justify, False = right justify. Here is an example showing the tuples in action.



* **Rtype None**


Example of 5-tuple: (“cpu_ram”, “RAM”, “{:0.1f}”, lambda x: x / 1000, False)


### vast.filter_invoice_items(args: [argparse.Namespace](https://docs.python.org/3/library/argparse.html#argparse.Namespace), rows: [List](https://docs.python.org/3/library/typing.html#typing.List))
This applies various filters to the invoice items. Currently it filters on start and end date and applies the
‘only_charge’ and ‘only_credits’ options.


* **Parameters**

    
    * **args** ([*argparse.Namespace*](https://docs.python.org/3/library/argparse.html#argparse.Namespace)) – should supply all the command-line options


    * **rows** (*List*) – The rows of items in the invoice



* **Rtype List**

    Returns the filtered list of rows.



### vast.generate__pdf_invoices(args)
Makes a PDF version of the data returned by the “show invoices” command. Takes the same command line args as that
command.





usage: ('vast generate pdf_invoice [OPTIONS]',)
* ('"-q", "--quiet", action="store_true", help="only display numeric ids"',)
* ('"-s", "--start_date", help="start date and time for report. Many formats accepted (optional)", type=str',)
* ('"-e", "--end_date", help="end date and time for report. Many formats accepted (optional)", type=str',)
* ('"-c", "--only_charges", action="store_true", help="Show only charge items."',)
* ('"-p", "--only_credits", action="store_true", help="Show only credit items."',)
* **Parameters**

    **args** ([*argparse.Namespace*](https://docs.python.org/3/library/argparse.html#argparse.Namespace)) – should supply all the command-line options



* **Return type**

    


### vast.label__instance(args)




usage: ('vast label instance <id> <label>',)
* ('"id", help="id of instance to label", type=int',)
* ('"label", help="label to set", type=str',)
* **Parameters**

    **args** ([*argparse.Namespace*](https://docs.python.org/3/library/argparse.html#argparse.Namespace)) – should supply all the command-line options



* **Return type**

    


### vast.list__machine(args)




usage: ('vast list machine id [--price_gpu PRICE_GPU] [--price_inetu PRICE_INETU] [--price_inetd PRICE_INETD] [--api-key API_KEY]',)
* ('"id", help="id of machine to list", type=int',)
* ('"-g", "--price_gpu", help="per gpu rental price in $/hour  (price for active instances)", type=float',)
* ('"-s", "--price_disk",
             help="storage price in $/GB/month (price for inactive instances',)
* ('"-u", "--price_inetu", help="price for internet upload bandwidth in $/GB", type=float',)
* ('"-d", "--price_inetd", help="price for internet download bandwidth in $/GB", type=float',)
* ('"-m", "--min_chunk", help="minimum amount of gpus", type=int',)
* ('"-e", "--end_date", help="unix timestamp of the available until date (optional)", type=int',)
* **Parameters**

    **args** ([*argparse.Namespace*](https://docs.python.org/3/library/argparse.html#argparse.Namespace)) – should supply all the command-line options



* **Return type**

    


### vast.parse_query(query_str: [str](https://docs.python.org/3/library/stdtypes.html#str), res: [Optional](https://docs.python.org/3/library/typing.html#typing.Optional)[[Dict](https://docs.python.org/3/library/typing.html#typing.Dict)] = None)
Basically takes a query string (like the ones in the examples of commands for the search__offers function) and
processes it into a dict of URL parameters to be sent to the server.


* **Parameters**

    
    * **query_str** ([*str*](https://docs.python.org/3/library/stdtypes.html#str)) – 


    * **res** (*Dict*) – 



* **Return Dict**



### vast.remove__defjob(args)




* ('"id", help="id of machine to remove default instance from", type=int',)
* **Parameters**

    **args** ([*argparse.Namespace*](https://docs.python.org/3/library/argparse.html#argparse.Namespace)) – should supply all the command-line options



* **Return type**

    


### vast.scp_url(args)




usage: ('vast scp-url',)
* ('"--id", help="id of instance", type=int',)
* **Parameters**

    **args** ([*argparse.Namespace*](https://docs.python.org/3/library/argparse.html#argparse.Namespace)) – should supply all the command-line options



* **Return type**

    


### vast.search__offers(args)
Creates a query based on search parameters as in the examples above.





usage: ('vast search offers [--help] [--api-key API_KEY] [--raw] <query>',)

        Query syntax:
        
            query = comparison comparison...
            comparison = field op value
            field = <name of a field>
            op = one of: <, <=, ==, !=, >=, >, in, notin
            value = <bool, int, float, etc> | 'any'
        
        note: to pass '>' and '<' on the command line, make sure to use quotes

           
        Examples:
        
            ./vast search offers 'compute_cap > 610 total_flops < 5'
            ./vast search offers 'reliability > 0.99  num_gpus>=4' -o 'num_gpus-'
            ./vast search offers 'rentable = any'
       
        Available fields:
            
              Name                  Type       Description

            compute_cap:            int       cuda compute capability*100  (ie:  650 for 6.5, 700 for 7.0)
            cpu_cores:              int       # virtual cpus
            cpu_cores_effective:    float     # virtual cpus you get
            cpu_ram:                float     system RAM in gigabytes
            cuda_vers:              float     cuda version
            disk_bw:                float     disk read bandwidth, in MB/s
            disk_space:             float     disk storage space, in GB
            dlperf:                 float     DL-perf score  (see FAQ for explanation)
            dlperf_usd:             float     DL-perf/$
            dph:                    float     $/hour rental cost
            driver_version          string    driver version in use on a host.
            duration:               float     max rental duration in days
            external:               bool      show external offers
            flops_usd:              float     TFLOPs/$
            gpu_mem_bw:             float     GPU memory bandwidth in GB/s
            gpu_ram:                float     GPU RAM in GB
            gpu_frac:               float     Ratio of GPUs in the offer to gpus in the system
            has_avx:                bool      CPU supports AVX instruction set.
            id:                     int       instance unique ID
            inet_down:              float     internet download speed in Mb/s
            inet_down_cost:         float     internet download bandwidth cost in $/GB
            inet_up:                float     internet upload speed in Mb/s
            inet_up_cost:           float     internet upload bandwidth cost in $/GB
            min_bid:                float     current minimum bid price in $/hr for interruptible
            num_gpus:               int       # of GPUs
            pci_gen:                float     PCIE generation
            pcie_bw:                float     PCIE bandwidth (CPU to GPU)
            reliability:            float     machine reliability score (see FAQ for explanation)
            rentable:               bool      is the instance currently rentable
            rented:                 bool      is the instance currently rented
            storage_cost:           float     storage cost in $/GB/month
            total_flops:            float     total TFLOPs from all GPUs
            verified:               bool      is the machine verified
    
* ('"-t", "--type", default="on-demand",
             help="Show \'bid\'(interruptible) or \'on-demand\' offers. default: on-demand"',)
* ('"-i", "--interruptible", dest="type", const="bid", action="store_const", help="Alias for --type=bid"',)
* ('"-b", "--bid", dest="type", const="bid", action="store_const", help="Alias for --type=bid"',)
* ('"-d", "--on-demand", dest="type", const="on-demand", action="store_const",
             help="Alias for --type=on-demand"',)
* ('"-n", "--no-default", action="store_true", help="Disable default query"',)
* ('"--disable-bundling", action="store_true",
             help="Show identical offers. This request is more heavily rate limited."',)
* ('"--storage", type=float, default=5.0, help="Amount of storage to use for pricing, in GiB. default=5.0GiB"',)
* ('"-o", "--order", type=str,
             help="Comma-separated list of fields to sort on. postfix field with - to sort desc. ex: -o \'num_gpus,total_flops-\'.  default=\'score-\'",
             default=\'score-\'',)
* ('"query",
             help="Query to search for. default: \'external=false rentable=true verified=true\', pass -n to ignore default",
             nargs="*", default=None',)
* **Parameters**

    **args** ([*argparse.Namespace*](https://docs.python.org/3/library/argparse.html#argparse.Namespace)) – should supply all the command-line options



### vast.set__api_key(args)
Caution: a bad API key will make it impossible to connect to the servers.





usage: ('vast set api-key APIKEY',)
* ('"new_api_key", help="Api key to set as currently logged in user"',)
* **Parameters**

    **args** ([*argparse.Namespace*](https://docs.python.org/3/library/argparse.html#argparse.Namespace)) – should supply all the command-line options



### vast.set__defjob(args)




usage: ('vast set defjob id [--api-key API_KEY] [--price_gpu PRICE_GPU] [--price_inetu PRICE_INETU] [--price_inetd PRICE_INETD] [--image IMAGE] [--args ...]',)
* ('"id", help="id of machine to launch default instance on", type=int',)
* ('"--price_gpu", help="per gpu rental price in $/hour", type=float',)
* ('"--price_inetu", help="price for internet upload bandwidth in $/GB", type=float',)
* ('"--price_inetd", help="price for internet download bandwidth in $/GB", type=float',)
* ('"--image", help="docker container image to launch", type=str',)
* ('"--args", nargs=argparse.REMAINDER, help="list of arguments passed to container launch"',)
* **Parameters**

    **args** ([*argparse.Namespace*](https://docs.python.org/3/library/argparse.html#argparse.Namespace)) – should supply all the command-line options



* **Return type**

    


### vast.set__min_bid(args)




usage: ('vast set min_bid id [--price PRICE]',)

        Change the current min bid price of machine id to PRICE.
    
* ('"id", help="id of machine to set min bid price for", type=int',)
* ('"--price", help="per gpu min bid price in $/hour", type=float',)
* **Parameters**

    **args** ([*argparse.Namespace*](https://docs.python.org/3/library/argparse.html#argparse.Namespace)) – should supply all the command-line options



* **Return type**

    


### vast.set_ask(args)

* **Parameters**

    **args** ([*argparse.Namespace*](https://docs.python.org/3/library/argparse.html#argparse.Namespace)) – should supply all the command-line options



* **Return type**

    


### vast.show__instances(args)
Shows the stats on the machine the user is renting.
:param argparse.Namespace args: should supply all the command-line options


### vast.show__invoices(args)
Show current payments and charges. Various options available to limit time range and type
of items. Default is to show everything for user’s entire billing history.





usage: ('vast show instances [--api-key API_KEY] [--raw]',)



usage: ('vast show invoices [OPTIONS]',)
* ('"-q", "--quiet", action="store_true", help="only display numeric ids"',)
* ('"-s", "--start_date", help="start date and time for report. Many formats accepted (optional)", type=str',)
* ('"-e", "--end_date", help="end date and time for report. Many formats accepted (optional)", type=str',)
* ('"-c", "--only_charges", action="store_true", help="Show only charge items."',)
* ('"-p", "--only_credits", action="store_true", help="Show only credit items."',)
* **Parameters**

    **args** ([*argparse.Namespace*](https://docs.python.org/3/library/argparse.html#argparse.Namespace)) – should supply all the command-line options



* **Return type**

    


### vast.show__machines(args)
Show the machines user is offering for rent.
:param argparse.Namespace args: should supply all the command-line options


### vast.show__user(args)
Shows stats for logged-in user. Does not show API key.





usage: ('vast show machines [OPTIONS]',)
* ('"-q", "--quiet", action="store_true", help="only display numeric ids"',)



usage: ('vast show user[OPTIONS]',)
* ('"-q", "--quiet", action="store_true", help="display information about user"',)
* **Parameters**

    **args** ([*argparse.Namespace*](https://docs.python.org/3/library/argparse.html#argparse.Namespace)) – should supply all the command-line options



* **Return type**

    


### vast.ssh_url(args)




usage: ('vast ssh-url',)
* ('"--id", help="id of instance", type=int',)
* **Parameters**

    **args** ([*argparse.Namespace*](https://docs.python.org/3/library/argparse.html#argparse.Namespace)) – should supply all the command-line options



* **Return type**

    


### vast.start__instance(args)




usage: ('vast start instance <id> [--raw]',)
* ('"id", help="id of instance to start/restart", type=int',)
* **Parameters**

    **args** ([*argparse.Namespace*](https://docs.python.org/3/library/argparse.html#argparse.Namespace)) – should supply all the command-line options



* **Return type**

    


### vast.stop__instance(args)




usage: ('vast stop instance [--raw] <id>',)
* ('"id", help="id of instance to stop", type=int',)
* **Parameters**

    **args** ([*argparse.Namespace*](https://docs.python.org/3/library/argparse.html#argparse.Namespace)) – should supply all the command-line options



* **Return type**

    


### vast.unlist__machine(args)
Removes machine from list of machines for rent.





usage: ('vast unlist machine <id>',)
* ('"id", help="id of machine to unlist", type=int',)
* **Parameters**

    **args** ([*argparse.Namespace*](https://docs.python.org/3/library/argparse.html#argparse.Namespace)) – should supply all the command-line options



* **Return type**

    


### vast.version_string_sort(a, b)
Accepts two version strings and decides whether a > b, a == b, or a < b.
This is meant as a sort function to be used for the driver versions in which only
the == operator currently works correctly. Not quite finished…


* **Parameters**

    
    * **a** ([*str*](https://docs.python.org/3/library/stdtypes.html#str)) – 


    * **b** ([*str*](https://docs.python.org/3/library/stdtypes.html#str)) – 



* **Return int**


## vast_pdf


### _class_ vast_pdf.Charge(name: [str](https://docs.python.org/3/library/stdtypes.html#str), quantity: [float](https://docs.python.org/3/library/functions.html#float), rate: [float](https://docs.python.org/3/library/functions.html#float), amount: [float](https://docs.python.org/3/library/functions.html#float), type: [str](https://docs.python.org/3/library/stdtypes.html#str), last4: [str](https://docs.python.org/3/library/stdtypes.html#str), timestamp: [float](https://docs.python.org/3/library/functions.html#float))
This class represents a charge line.


### vast_pdf.blank_row(table: borb.pdf.canvas.layout.table.table.Table, col_num: [int](https://docs.python.org/3/library/functions.html#int), row_num: [int](https://docs.python.org/3/library/functions.html#int) = 1)
Just a set of blank rows to act as filler.


* **Parameters**

    
    * **table** – The table we want to modify


    * **col_num** ([*int*](https://docs.python.org/3/library/functions.html#int)) – How many columns in the table?


    * **row_num** ([*int*](https://docs.python.org/3/library/functions.html#int)) – How many blank rows do we need?



* **Rtype None**



### vast_pdf.build_2nd_block_table()
This function creates a Table containing invoice information.
This information spans the page and is the second large block of
text on the page.


* **Rtype FixedColumnWidthTable**

    a Table containing information such as the company address, payment terms, date, and sum of charge_fields/payments.



### vast_pdf.build_billto_table(user_blob: [dict](https://docs.python.org/3/library/stdtypes.html#dict))
This function builds a Table containing billing and shipping information
It spans the page using a single wide column.


* **Parameters**

    **user_blob** (*Dict*) – A dict containing the user’s info.



* **Rtype Table**

    a Table containing shipping and billing information



### vast_pdf.build_charge_table(charges: [List](https://docs.python.org/3/library/typing.html#typing.List)[[vast_pdf.Charge](index.md#vast_pdf.Charge)], page_number: [int](https://docs.python.org/3/library/functions.html#int))
This function builds a Table containing itemized billing information


* **Parameters**

    
    * **charges** ([*List*](https://docs.python.org/3/library/typing.html#typing.List)*[*[*Charge*](index.md#vast_pdf.Charge)*]*) – the rows on the invoice


    * **page_number** ([*int*](https://docs.python.org/3/library/functions.html#int)) – Current page number.



* **Rtype FlexibleColumnWidthTable**

    Borb Table containing the information.



### vast_pdf.build_invoice_charges_table(rows_invoice: [List](https://docs.python.org/3/library/typing.html#typing.List)[[Dict](https://docs.python.org/3/library/typing.html#typing.Dict)], charges_per_page: [int](https://docs.python.org/3/library/functions.html#int), page_number: [int](https://docs.python.org/3/library/functions.html#int))
This function creates a page of invoice charge_fields and depletes the list of charge_fields by the number it
prints out. Essentially a pop function that removes multiple items at once.


* **Parameters**

    
    * **page_number** ([*int*](https://docs.python.org/3/library/functions.html#int)) – 


    * **rows_invoice** ([*List*](https://docs.python.org/3/library/typing.html#typing.List)*[*[*Dict*](https://docs.python.org/3/library/typing.html#typing.Dict)*]*) – List of rows in the invoice


    * **charges_per_page** ([*int*](https://docs.python.org/3/library/functions.html#int)) – How many rows of charge_fields we put on this page.



* **Rtype FlexibleColumnWidthTable**



### vast_pdf.build_logo_and_invoice_num_table(page_number)
At the top of every page is a table with our logo, the invoice number, and little text reading “page X of Y”.
This function creates that table and returns it.


* **Parameters**

    **page_number** – 



* **Rtype FixedColumnWidthTable**



### vast_pdf.compute_column_sum(rows_invoice: [List](https://docs.python.org/3/library/typing.html#typing.List)[[Dict](https://docs.python.org/3/library/typing.html#typing.Dict)], column_name: [str](https://docs.python.org/3/library/stdtypes.html#str), values_are_negative: [bool](https://docs.python.org/3/library/functions.html#bool) = False)
Sum over one of the columns in the invoice.


* **Parameters**

    
    * **rows_invoice** ([*List*](https://docs.python.org/3/library/typing.html#typing.List)*[*[*Dict*](https://docs.python.org/3/library/typing.html#typing.Dict)*]*) – List of rows in the invoice


    * **column_name** ([*str*](https://docs.python.org/3/library/stdtypes.html#str)) – Name of column to sum over.


    * **values_are_negative** ([*bool*](https://docs.python.org/3/library/functions.html#bool)) – are we summing values that are actually negative?



* **Return type**

    [float](https://docs.python.org/3/library/functions.html#float)



### vast_pdf.compute_pages_needed(rows_invoice: [List](https://docs.python.org/3/library/typing.html#typing.List)[[Dict](https://docs.python.org/3/library/typing.html#typing.Dict)])
Function to work out how many pages we need so that the page_count can be filled in at the top of every page.


* **Parameters**

    **rows_invoice** ([*List*](https://docs.python.org/3/library/typing.html#typing.List)*[*[*Dict*](https://docs.python.org/3/library/typing.html#typing.Dict)*]*) – The list of dicts we use elsewhere.



* **Rtype int**



### vast_pdf.field_and_filler(user_blob: [Dict](https://docs.python.org/3/library/typing.html#typing.Dict), table: borb.pdf.canvas.layout.table.table.Table, fieldname: [str](https://docs.python.org/3/library/stdtypes.html#str))
Adds a field to the table along with a filler cell to span the table.


* **Parameters**

    
    * **fieldname** ([*str*](https://docs.python.org/3/library/stdtypes.html#str)) – 


    * **user_blob** (*Dict*) – A dict containing the user’s info.


    * **table** (*Table*) – The table to be modified.



* **Rtype None**



### vast_pdf.format_float_val_as_currency(v)
Given a float value, format it as currency. Note that the sign is backwards due to the fact that the charge_fields in
the data that comes back are positive numbers but are written as negative on the invoice. There’s also the fact
that in our format string, if the value is actually negative it will print as “$-x.xx” instead of the correct
“-$x.xx”. I don’t know if this can be fixed with format strings so we rely on this hack.


* **Parameters**

    **v** ([*float*](https://docs.python.org/3/library/functions.html#float)) – 



* **Rtype str**



### vast_pdf.generate_invoice(user_blob: [Dict](https://docs.python.org/3/library/typing.html#typing.Dict), rows_invoice: [List](https://docs.python.org/3/library/typing.html#typing.List)[[Dict](https://docs.python.org/3/library/typing.html#typing.Dict)], filter_data: [Dict](https://docs.python.org/3/library/typing.html#typing.Dict))
This is the main function in this library. It calls everything else and makes the invoice page by page. The
resulting invoice is written as a single PDF file.


* **Parameters**

    
    * **filter_data** – Parameters for client side filter.


    * **user_blob** – info about the user


    * **rows_invoice** ([*List*](https://docs.python.org/3/library/typing.html#typing.List)*[*[*Dict*](https://docs.python.org/3/library/typing.html#typing.Dict)*]*) – The list of dicts we use elsewhere.



* **Rtype None**



### vast_pdf.generate_invoice_page(user_blob: [Dict](https://docs.python.org/3/library/typing.html#typing.Dict), rows_invoice: [List](https://docs.python.org/3/library/typing.html#typing.List)[[Dict](https://docs.python.org/3/library/typing.html#typing.Dict)], page_number: [int](https://docs.python.org/3/library/functions.html#int), date_header_text: [str](https://docs.python.org/3/library/stdtypes.html#str) = '')
Makes a single page of the invoice.


* **Parameters**

    
    * **date_header_text** ([*str*](https://docs.python.org/3/library/stdtypes.html#str)) – 


    * **user_blob** (*Dict*) – Dict of info about the user


    * **rows_invoice** ([*List*](https://docs.python.org/3/library/typing.html#typing.List)*[*[*Dict*](https://docs.python.org/3/library/typing.html#typing.Dict)*]*) – List of rows in the invoice


    * **page_number** ([*int*](https://docs.python.org/3/library/functions.html#int)) – The page number for this page.



* **Rtype Page**



### vast_pdf.product_row(charge_fields)
Makes a single row with charge information in it.


* **Parameters**

    **charge_fields** – 



* **Rtype Charge**



### vast_pdf.product_rows(rows_invoice)
Maps a list of invoice dicts to a list of Charge objects using product_row function.


* **Parameters**

    **rows_invoice** – 



* **Rtype typing.List[Charge]**



### vast_pdf.translate_null_strings_to_blanks(d: [Dict](https://docs.python.org/3/library/typing.html#typing.Dict))
Map over a dict and translate any null string values into ‘ ‘.
Leave everything else as is. This is needed because you cannot add TableCell
objects with only a null string or the client crashes.


* **Parameters**

    **d** (*Dict*) – dict of item values.



* **Rtype Dict**
